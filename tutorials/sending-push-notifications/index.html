
<!DOCTYPE html>
<html class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content=""Easily send push notifications using Scapholdâ€™s GraphQLÂ API."">
      
      
      
        <meta name="author" content=""Vince Ning"">
      
      
        <link rel="shortcut icon" href="../../images/favicon.ico">
      
      <meta name="generator" content="mkdocs-0.16.2, mkdocs-material-1.3.0">
    
    
      
        <title>Sending Push Notifications with GraphQL &Â Scaphold</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-56ade86843.js"></script>
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-1d1da4857d.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../css/base.css">
    
      <link rel="stylesheet" href="../../css/styles.css">
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="../.." title="Scaphold Docs" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Tutorials
                </span>
              
            
            Sending Push Notifications
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <div class="md-search__overlay"></div>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result"></div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <div class="md-header-nav__source">
          
            


  


  <a href="https://github.com/scaphold-io/scaphold-docs" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          
        </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    Scaphold Docs
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/scaphold-io/scaphold-docs" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Getting Started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/jumpstart-video/" title="Jumpstart Video" class="md-nav__link">
      Jumpstart Video
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/starter-kits/" title="Starter Kits" class="md-nav__link">
      Starter Kits
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Core Data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Core Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../coredata/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../coredata/schema/" title="The Schema" class="md-nav__link">
      The Schema
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../coredata/queries/" title="Queries" class="md-nav__link">
      Queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../coredata/mutations/" title="Mutations" class="md-nav__link">
      Mutations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../coredata/subscriptions/" title="Subscriptions" class="md-nav__link">
      Subscriptions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../coredata/connections-pagination/" title="Connections" class="md-nav__link">
      Connections
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Authentication
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Authentication
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../authentication/tokens/" title="Auth Tokens" class="md-nav__link">
      Auth Tokens
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../authentication/permissions/" title="Permissions" class="md-nav__link">
      Permissions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../authentication/social/" title="Social Auth" class="md-nav__link">
      Social Auth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../authentication/super-users/" title="Super Users" class="md-nav__link">
      Super Users
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Realtime Subscriptions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Realtime Subscriptions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../realtime/subscriptions-apollo/" title="Subscriptions With Apollo Client" class="md-nav__link">
      Subscriptions With Apollo Client
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../realtime/subscriptions-react/" title="Subscriptions With React" class="md-nav__link">
      Subscriptions With React
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../realtime/slackr-chat-app/" title="Build Slack Tutorial" class="md-nav__link">
      Build Slack Tutorial
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Custom Logic
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Custom Logic
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../custom-logic/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../custom-logic/composition/" title="Function Composition" class="md-nav__link">
      Function Composition
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../custom-logic/pre-operations/" title="Pre Operations" class="md-nav__link">
      Pre Operations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../custom-logic/operation-phase/" title="Operation Phase" class="md-nav__link">
      Operation Phase
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../custom-logic/post-operations/" title="Post Operations" class="md-nav__link">
      Post Operations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../custom-logic/async-operations/" title="Async Operations" class="md-nav__link">
      Async Operations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../custom-logic/logs/" title="Logs & Examples" class="md-nav__link">
      Logs & Examples
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Persisted Queries
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Persisted Queries
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../persisted-queries/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../persisted-queries/getting-started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../persisted-queries/querying-from-client/" title="Querying From Client" class="md-nav__link">
      Querying From Client
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Files
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Files
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../files/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../files/uploading/" title="Uploading" class="md-nav__link">
      Uploading
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../files/querying/" title="Querying" class="md-nav__link">
      Querying
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Integrations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Integrations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/email/" title="Email" class="md-nav__link">
      Email
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/monitoring/" title="Monitoring" class="md-nav__link">
      Monitoring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/passwordless/" title="Passwordless Auth" class="md-nav__link">
      Passwordless Auth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/push/" title="Push Notifications" class="md-nav__link">
      Push Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9-6" type="checkbox" id="nav-9-6">
    
    <label class="md-nav__link" for="nav-9-6">
      Search
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-9-6">
        Search
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/search/setup/" title="Setup" class="md-nav__link">
      Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/search/querying/" title="Querying" class="md-nav__link">
      Querying
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9-7" type="checkbox" id="nav-9-7">
    
    <label class="md-nav__link" for="nav-9-7">
      Social Auth
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-9-7">
        Social Auth
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/social/setup/" title="Setup" class="md-nav__link">
      Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/social/login-with-native/" title="Login With Native SDKs" class="md-nav__link">
      Login With Native SDKs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/social/login-with-auth0/" title="Login With Auth0" class="md-nav__link">
      Login With Auth0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      App Management
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        App Management
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../app-management/alias/" title="Aliases" class="md-nav__link">
      Aliases
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../app-management/analytics/" title="Analytics" class="md-nav__link">
      Analytics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../app-management/export-schema/" title="Export Schema" class="md-nav__link">
      Export Schema
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../app-management/fork-app/" title="Fork App" class="md-nav__link">
      Fork App
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../app-management/teams/" title="Teams" class="md-nav__link">
      Teams
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../app-management/multi-region/" title="Multi Region" class="md-nav__link">
      Multi Region
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../app-management/admin-tokens/" title="Admin Tokens" class="md-nav__link">
      Admin Tokens
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../app-management/token-expiration/" title="Token Expiration" class="md-nav__link">
      Token Expiration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11" checked>
    
    <label class="md-nav__link" for="nav-11">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../realtime-apps-with-subscriptions/" title="Build A Chat App" class="md-nav__link">
      Build A Chat App
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
    <a href="./" title="Sending Push Notifications" class="md-nav__link md-nav__link--active">
      Sending Push Notifications
    </a>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ios-push-notifications/" title="Setup iOS Push" class="md-nav__link">
      Setup iOS Push
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../android-push-notifications/" title="Setup Android Push" class="md-nav__link">
      Setup Android Push
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../migrate-mongodb-graphql/" title="Migrating MongoDB" class="md-nav__link">
      Migrating MongoDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../persisted-queries/" title="Using Persisted Queries" class="md-nav__link">
      Using Persisted Queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../advanced-queries/" title="Advanced Relational Queries" class="md-nav__link">
      Advanced Relational Queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../authentication-in-graphql/" title="Authentication in GraphQL" class="md-nav__link">
      Authentication in GraphQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../search-with-algolia/" title="Add Search With Algolia" class="md-nav__link">
      Add Search With Algolia
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../aggregations-in-graphql/" title="Aggregations In GraphQL" class="md-nav__link">
      Aggregations In GraphQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../apollo-optics-graphql-server/" title="Integrate Apollo Optics" class="md-nav__link">
      Integrate Apollo Optics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../adding-social-auth/" title="Add Social Auth" class="md-nav__link">
      Add Social Auth
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../errors/" title="Errors" class="md-nav__link">
      Errors
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/scaphold-io/scaphold-docs/edit/master/docs/tutorials/sending-push-notifications.md" title="Edit this page" class="md-icon md-content__icon">edit</a>
                
                
                <h2 id="step-by-step-guide-on-sending-push-notifications-with-graphql">Step-by-step guide on sending push notifications with GraphQL</h2>
<p><img alt="GraphQL and Push Notifications" src="https://assets.scaphold.io/community/blog/send-push-notifications-scaphold-graphql/banner_send_push.png" /></p>
<p>At <a href="https://scaphold.io">Scaphold</a>, weâ€™ve talked to thousands of people from all walks of GraphQL life, and discovered that <strong>mobile is the next frontier for GraphQL tooling</strong>. Apollo has already done a wonderful job of strengthening the community with Apollo Client for <a href="https://github.com/apollographql/apollo-ios">iOS</a> and <a href="https://github.com/apollographql/apollo-android">Android</a>. And thereâ€™s certainly more to come.</p>
<blockquote>
<p>Weâ€™re joining the mobileÂ effort!</p>
</blockquote>
<p>... With more GraphQL support for iOS and Android push notifications on Scaphold. In this guide, weâ€™ll show you how to send push notifications with a GraphQL API built to the open standard that works with both Apollo and Relay on any client platform.</p>
<h1 id="configuring-push-notifications-with-graphql">Configuring Push Notifications withÂ GraphQL</h1>
<p>Before we begin, make sure you have done the basic setup APNS (Apple Push Notication Service) and/or GCM (Google Cloud Messaging).
Itâ€™s not the most straightforward process to get these accounts set up so weâ€™ve also written step-by-step guides to help you get started.
If needed, take a look at the relevant guide and come back here.</p>
<ul>
<li>
<p><a href="https://scaphold.io/community/blog/iOS-push-notifications-with-graphql/">Setup for iOS</a></p>
</li>
<li>
<p><a href="https://scaphold.io/community/blog/android-push-notifications-with-graphql/">Setup for Android</a></p>
</li>
</ul>
<p>If you have these tokens already, but donâ€™t have a GraphQL server at your disposal, the quickest way is to
<strong>sign up for free on <a href="https://scaphold.io">Scaphold</a> and create an app</strong>. As soon as you create an app,
we will deploy a GraphQL server backed by scalable AWS infrastructure.
Once you have an app, you can enable the relevant push notification integrations via the integration tab. The aforementioned setup guides will show you how.</p>
<p>Now that weâ€™re on the same page, letâ€™s begin. The process for sending push notifications in any workflow
starts with your device token. Itâ€™s a unique identifier for your app on your device specifically.
This is how APNS and GCM, or any other push notification hub for that matter, understand where to send your push notifications to.</p>
<blockquote>
<p>ðŸ’Œ Think of a device token as a mailing address for push notifications.</p>
</blockquote>
<p>This means that weâ€™re going to have to register each device token thatâ€™s created on a particular device with Apple or Google, so that they have a registry of valid device tokens for our app.</p>
<p>Weâ€™ll be using these working boilerplates for the remainder of this tutorial:</p>
<ul>
<li>
<p><a href="https://github.com/scaphold-io/apple-ios-push-graphql-starter-kit">iOS boilerplate</a></p>
</li>
<li>
<p><a href="https://scaphold.io/community/blog/android-push-notifications-with-graphql/">Android boilerplate</a></p>
</li>
</ul>
<h1 id="1-registering-device-tokens-users">1. Registering Device Tokens &amp;Â Users.</h1>
<p>Run your app and make sure you <strong>generate a device token</strong>. The boilerplate will have this printed out in the console. It will look something like this:</p>
<h4 id="ios"><em>iOS</em></h4>
<p><img alt="Device_Token_Xcode" src="https://assets.scaphold.io/community/blog/send-push-notifications-scaphold-graphql/Device_Token_Xcode.png" /></p>
<h4 id="android"><em>Android</em></h4>
<p><img alt="Device_Token_Android" src="https://assets.scaphold.io/community/blog/send-push-notifications-scaphold-graphql/Device_Token_Android.png" /></p>
<h3 id="associate-token-with-a-valid-user"><strong>Associate Token with a ValidÂ User</strong></h3>
<p>In order to use the device token to send a push notification, itâ€™s important that we associate a device token with a user in the app.</p>
<p>This is needed since letâ€™s say that <em>User A</em> wants to send a push notification to <em>User B</em>. The problem is that <em>User A</em> will only have context of its own device token, but not the device token of <em>User B</em>. However, <em>User A</em> will most likely have the user ID of <em>User B</em>, so we can send a push notification <em>User B</em> in that manner, so long as <em>User B</em> has a valid device token associated to that person.</p>
<p>In order to accomplish this, we must login first to obtain the userâ€™s authentication credentials.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>// Mutation
mutation LoginUser ($user: LoginUserInput!) {
  loginUser(input: $user) {
    token
    user {
      id
      username
    }
  }
}

// Variables
{
  &quot;user&quot;: {
    &quot;username&quot;: &quot;elon@spacex.com&quot;,
    &quot;password&quot;: &quot;SuperSecretPassword&quot;
  }
}
</pre></div>
</td></tr></table>

<p>The result of this mutation will provide an authentication token that you will need to set as the Authorization header for future requests.</p>
<div class="row" style="display: flex; align-items: center">
  <div class="col-md-6 col-sm-6">
    <img src="https://assets.scaphold.io/community/blog/send-push-notifications-scaphold-graphql/Authorization_Header.png" alt="Authorization_Header" />
  </div>
  <div class="col-md-6 col-sm-6">
    <p>
      Thus, when we run the <em>createDeviceToken</em> mutation, the GraphQL server will know to connect the new device token with this particular user.
    </p>
  </div>
</div>

<p>Then, we run the <strong>createDeviceToken</strong> mutation to register the device token with APNS or GCM through our GraphQL server.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>// Mutation
mutation CreateDeviceToken($input: CreateDeviceTokenInput!) {
  createDeviceToken(input: $input) {
    changedDeviceToken {
      id
      token
      user {
        id
        username
      }
      platform
      createdAt
    }
  }
}

// Variables
{
  &quot;input&quot;:  {
    &quot;token&quot;: &quot;&lt;YOUR_DEVICE_TOKEN&gt;&quot;,
    &quot;platform&quot;: &quot;APNS_DEV&quot; // or GCM
  }
}
</pre></div>
</td></tr></table>

<p>The GraphQL server understands that if the token was created already, the existing token instance will update instead of create a new one. Associating a token with a valid user can all be done in one step. Typically, following the login flow for your app, you should send an authenticated request to create the device token object on the server. This will create the token and associate the user altogether like above, so long as you have a valid authentication token in the header of your request.</p>
<blockquote>
<p>Now with this device token registered and associated to a user, we can start sending push notifications!</p>
</blockquote>
<h3 id="send-push-notification-to-user"><strong>Send Push Notification toÂ User</strong></h3>
<p>Since we rarely know what the device token is for another user, Scaphold abstracts away the association of device token to user, meaning from your client app with <em>User A</em>, you can send a push notification to User B only knowing that personâ€™s user ID.</p>
<p>This is a direct way of sending push notifications to a single user. <strong>Run this GraphQL mutation</strong> to send a push notification:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>// Mutation
mutation SendToUser($notif: SendPushNotificationToUserInput!) {
  sendPushNotificationToUser(input: $notif) {
    changedPushConfirmation {
      status
      message {
        APNS_DEV {
          alert {
            title
            body
          }
          badge
        }
        GCM {
          title
          body
          badge
        }
      }
    }
  }
}

// Variables
{
  &quot;notif&quot;: {
    &quot;userId&quot;: &quot;VXNlcjox&quot;, // ID of User B
    &quot;message&quot;: {
      &quot;APNS_DEV&quot;: {
        &quot;alert&quot;: {
          &quot;title&quot;: &quot;New Message from Elon Musk&quot;,
          &quot;body&quot;: &quot;Hey what&#39;s up Zuck?&quot;
        },
        &quot;badge&quot;: 1
      },
      &quot;GCM&quot;: {
        &quot;title&quot;: &quot;New Message from Elon Musk&quot;,
        &quot;body&quot;: &quot;Hey what&#39;s up Zuck?&quot;,
        &quot;badge&quot;: &quot;1&quot;
      }
    }
  }
}
</pre></div>
</td></tr></table>

<blockquote>
<p>Nice! You just sent your first push notification withÂ GraphQL!</p>
</blockquote>
<div class="row" style="display: flex; align-items: center">
  <div class="col-md-6 col-sm-6">
    <img src="https://assets.scaphold.io/community/blog/send-push-notifications-scaphold-graphql/Push_Received.png" alt="Push_Received" />
  </div>
  <div class="col-md-6 col-sm-6">
    <p>So what just happened?</p>
    <p>We sent a notification to both APNS and GCM so that any device from either platform associated with that user ID will receive the message.</p>
    <p>The way that each app receives notifications is through broadcast listeners.</p>
    <p>For iOS, the listener method is called: <a href="https://github.com/scaphold-io/apple-ios-push-graphql-starter-kit/blob/master/ScapholdPushTutorial/AppDelegate.m#L73-L79"><b>didReceiveRemoteNotification</b> in the <b>AppDelegate</b> file.</a></p>
    <p>And on Android, the method is called: <a href="https://github.com/scaphold-io/android-gcm-push-graphql-starter-kit/blob/master/app/src/main/java/com/scaphold/scapholdpushtutorial/ExternalReceiver.java"><b>onReceive</b> for the class that extends a <b>BroadcastReceiver</b>.</a></p>
  </div>
</div>

<blockquote>
<p>Bonus: Weâ€™ve included a mutation that allows you to send push notifications to a list of users all in one request with a <strong>list of their user IDs</strong>. ðŸ™Œ</p>
</blockquote>
<h1 id="2-managing-push-channels-groups">2. Managing Push Channels (Groups).</h1>
<p>Often times, youâ€™ll want to send push notifications to a group of people.</p>
<p>Perhaps if youâ€™re running Facebook Messenger. Each time a new chat message is sent to a chat group, youâ€™ll want each person in that group to receive a notification that someone sent a new message, waiting to be read.</p>
<h3 id="create-push-channel"><strong>Create PushÂ Channel</strong></h3>
<p>In this case, weâ€™ve provided the ability to create and manage push notification channels for your app. These are unique by name. In the Facebook example, a new push channel would be created when a user decides to create a new chat group with his/her friends.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>// Mutation
mutation CreateChannel ($channel: CreatePushChannelInput!) {
  createPushChannel(input: $channel) {
    changedPushChannel {
      id
      name
    }
  }
}

// Variables
{
  &quot;channel&quot;: {
    &quot;channelName&quot;: &quot;Zuck_Family&quot;
  }
}
</pre></div>
</td></tr></table>

<p>But the channel (group) is still empty, so sending a push notification to this channel wonâ€™t go to anyone right now.</p>
<h3 id="subscribe-to-a-push-channel"><strong>Subscribe to a PushÂ Channel</strong></h3>
<p>In order for a user to be part of this new push channel, a user needs to subscribe to the channel.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>// Mutation
mutation Subscribe ($subscribe: SubscribeDeviceToChannelInput!) {
  subscribeDeviceToChannel(input: $subscribe) {
    changedDeviceToken {
      token
      user {
        username
      }
    }
  }
}

// Variables
&quot;subscribe&quot;: {
    &quot;token&quot;: &quot;&lt;YOUR_DEVICE_TOKEN&gt;&quot;,
    &quot;channelName&quot;: &quot;Zuck_Family&quot;
  }
}
</pre></div>
</td></tr></table>

<p>Now that weâ€™ve subscribed ourselves to Zuckâ€™s familyâ€™s group chat thread ðŸ˜‚ we can start receiving push notifications whenever this channel is sent a new message. Currently, thereâ€™s only one member in this group, but of course we can keep adding more users.</p>
<h3 id="send-push-notification-to-channel"><strong>Send Push Notification toÂ Channel</strong></h3>
<p>Letâ€™s send a push notification to everyone whoâ€™s subscribed to this channel in one request.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>// Mutation
mutation SendToChannel ($msg: SendPushNotificationToChannelInput!) {
  sendPushNotificationToChannel(input: $msg) {
    changedPushConfirmation {
      status
      message {
        APNS_DEV {
          alert {
            title
            body
          }
          badge
        }
        GCM {
          title
          body
          badge
        }
      }
    }
  }
}

// Variables
{
  &quot;msg&quot;: {
    &quot;channelName&quot;: &quot;Zuck_Family&quot;,
    &quot;message&quot;: {
      &quot;APNS_DEV&quot;: {
        &quot;alert&quot;: {
          &quot;title&quot;: &quot;New Message from Priscilla&quot;,
          &quot;body&quot;: &quot;Where are the kids?&quot;
        },
        &quot;badge&quot;: 1
      },
      &quot;GCM&quot;: {
        &quot;title&quot;: &quot;New Message from Priscilla&quot;,
        &quot;body&quot;: &quot;Where are the kids?&quot;,
        &quot;badge&quot;: &quot;1&quot;
      }
    }
  }
}
</pre></div>
</td></tr></table>

<blockquote>
<p>Neat! We just sent a message to the Zuck family groupÂ chat.</p>
</blockquote>
<div class="row" style="display: flex; align-items: center">
  <div class="col-md-6 col-sm-6">
    <img src="https://assets.scaphold.io/community/blog/send-push-notifications-scaphold-graphql/Push_Received_2.png" alt="Push_Received_2" />
  </div>
  <div class="col-md-6 col-sm-6">
    <p>The result appears just the same as if the message were sent individually from one user to another.</p>
  </div>
</div>

<hr />

<p>Great job ðŸŽ‰! Youâ€™ve now learned how to send push notifications through GraphQL and set up your GraphQL server to handle this workflow in a flexible way.</p>
<p>You can take these practices of setting up a push notification system to your own GraphQL backend, but we can guarantee that <a href="https://scaphold.io">Scaphold</a> makes it easier for you since you wonâ€™t have to create an entirely new GraphQL server from scratch, manage device tokens and associations to user, let alone coordinate subscribing to channels.</p>
<p>Enjoy how easy that was to set up a GraphQL server for iOS and Android push notifications? <strong>Join <a href="https://scaphold.io">Scaphold</a> today!</strong></p>
<p>And be sure to follow us on <a href="https://twitter.com/ScapholdDotIO">Twitter</a> and <a href="http://slack.scaphold.io/">join our Slack</a> for more awesome ways to learn about how to quickly launch your next app with GraphQL!</p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../realtime-apps-with-subscriptions/" title="Build A Chat App" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Build A Chat App
              </span>
            </div>
          </a>
        
        
          <a href="../ios-push-notifications/" title="Setup iOS Push" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Setup iOS Push
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-7aa26ad9ec.js"></script>
      <script>app.initialize({url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>